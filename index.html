<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ì—ì½” í€´ì¦ˆ â€” ê³ ë“±í•™ìƒìš©</title>
<style>
  :root{
    --bg:#0e1726;
    --card:#121c2f;
    --accent:#3ddc97;
    --accent-2:#7aa2f7;
    --text:#e6e6e6;
    --muted:#9fb0c9;
    --danger:#ff6b6b;
    --ok:#3ddc97;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, sans-serif;
    color:var(--text); background: radial-gradient(1200px 600px at 10% -10%, #1b2a4a 0%, #0e1726 45%) fixed;
    min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
  }
  .app{
    width:100%; max-width:860px; background:linear-gradient(180deg,#13243e, #0f1a31);
    border:1px solid rgba(255,255,255,.07); border-radius:18px; box-shadow:0 12px 40px rgba(0,0,0,.35);
    overflow:hidden;
  }
  header{
    padding:18px 22px; display:flex; align-items:center; gap:16px; border-bottom:1px solid rgba(255,255,255,.06);
  }
  .logo{
    width:40px; height:40px; border-radius:12px; background:conic-gradient(from 0deg, var(--accent), var(--accent-2), #a3ffbf, var(--accent));
    box-shadow:0 0 18px rgba(61,220,151,.35) inset, 0 8px 22px rgba(61,220,151,.15);
  }
  .title-wrap{flex:1}
  h1{font-size:18px; margin:0 0 2px}
  .subtitle{font-size:13px; color:var(--muted)}
  .progress{
    width:180px; height:10px; border-radius:999px; background:rgba(255,255,255,.08); overflow:hidden; position:relative;
  }
  .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), #7fffd4); transition:width .35s ease}
  main{padding:26px 22px 16px}
  .card{
    background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:22px; 
  }
  .q-meta{display:flex; align-items:center; gap:10px; color:var(--muted); font-size:14px; margin-bottom:10px}
  .q-text{font-size:20px; line-height:1.5; margin:6px 0 18px}
  .choices{display:grid; gap:10px}
  .choice{
    background:#0f1b32; border:1px solid rgba(255,255,255,.07); border-radius:12px; padding:14px 14px; cursor:pointer;
    transition:.2s; display:flex; align-items:flex-start; gap:12px;
  }
  .choice:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.20)}
  .choice input{margin-top:3px; accent-color:var(--accent)}
  .nav{
    margin-top:18px; display:flex; align-items:center; gap:10px; justify-content:space-between;
  }
  .btn{
    padding:12px 18px; border-radius:12px; border:1px solid rgba(255,255,255,.12);
    background:linear-gradient(180deg,#1a2b4b,#14233f); color:#fff; cursor:pointer; font-weight:600;
    transition:.2s;
  }
  .btn[disabled]{opacity:.5; cursor:not-allowed}
  .btn.primary{background:linear-gradient(180deg,#2fcb99,#21a67d); border-color:transparent; color:#0b1a1a}
  .btn.primary:hover{filter:brightness(1.06)}
  .btn.ghost{background:transparent}
  .warn{color:var(--danger); font-size:14px; min-height:20px}
  .footer{padding:0 22px 22px; color:var(--muted); font-size:12px}
  .hidden{display:none}

  /* ê²°ê³¼ í™”ë©´ */
  .result{
    text-align:center; padding:10px 8px;
  }
  .score-badge{
    display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:14px;
    background:rgba(61,220,151,.12); border:1px solid rgba(61,220,151,.35); color:#aaf0d0; font-weight:700; letter-spacing:.4px;
  }
  .explain{
    margin-top:18px; text-align:left; background:#0e1930; border:1px solid rgba(255,255,255,.07); border-radius:14px; padding:14px;
    max-height:280px; overflow:auto;
  }
  .explain details{background:#0f1c36; border:1px solid rgba(255,255,255,.06); border-radius:10px; padding:10px 12px; margin-bottom:10px}
  .explain summary{cursor:pointer; font-weight:700}
  .explain small{color:#a8b7cf}

  /* í’ì„ /íŒ ì• ë‹ˆë©”ì´ì…˜ */
  .balloon-layer{
    pointer-events:none; position:fixed; inset:0; overflow:hidden; z-index:9999;
  }
  .balloon{
    position:absolute; width:60px; height:80px; border-radius:50% 50% 48% 48%;
    background: radial-gradient(60% 70% at 30% 30%, rgba(255,255,255,.7), rgba(255,255,255,.15) 30%, var(--bcol) 31%, var(--bcol) 100%);
    box-shadow: inset 0 -8px 20px rgba(0,0,0,.25), 0 10px 18px rgba(0,0,0,.25);
    animation: floatUp linear forwards;
  }
  .balloon::after{
    content:""; position:absolute; bottom:-26px; left:50%; width:2px; height:28px; background:rgba(255,255,255,.6);
    transform:translateX(-50%);
  }
  .balloon::before{
    content:""; position:absolute; bottom:-2px; left:50%; transform:translateX(-50%);
    border-left:8px solid transparent; border-right:8px solid transparent; border-top:10px solid rgba(0,0,0,.25);
    filter:brightness(1.3);
  }
  @keyframes floatUp{
    from{transform:translateY(40vh) scale(1); opacity:.95}
    to{transform:translateY(-120vh) scale(1.05); opacity:1}
  }
  .balloon.pop{
    animation:none; transform:scale(1.1);
    background: radial-gradient(50% 50% at 50% 50%, transparent 35%, rgba(255,255,255,.15) 36%, transparent 37%);
    box-shadow:none; opacity:0; transition:opacity .5s ease, transform .2s ease;
  }
  .burst{
    position:absolute; width:6px; height:6px; background:#fff; border-radius:50%; opacity:.95;
    animation: burstOut .6s ease forwards;
  }
  @keyframes burstOut{
    from{transform:translate(0,0) scale(1); opacity:1}
    to{transform:translate(var(--dx), var(--dy)) scale(0.6); opacity:0}
  }
</style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <div class="title-wrap">
        <h1>ì—ì½” í€´ì¦ˆ</h1>
        <div class="subtitle">ê³ ë“±í•™ìƒìš© í™˜ê²½Â·ê¸°í›„ ìƒì‹ í…ŒìŠ¤íŠ¸</div>
      </div>
      <div class="progress" aria-label="ì§„í–‰ë¥ ">
        <div class="bar" id="bar" style="width:0%"></div>
      </div>
    </header>

    <main>
      <div class="card">
        <div class="q-meta"><span id="qidx">ë¬¸ì œ 1 / 10</span> Â· <span id="qtype">ê°ê´€ì‹</span></div>
        <div class="q-text" id="qtext">ë¬¸ì œ ë¬¸êµ¬</div>
        <div class="choices" id="choices"></div>
        <div class="nav">
          <button class="btn ghost" id="prevBtn" disabled>ì´ì „</button>
          <div style="display:flex; flex-direction:column; align-items:flex-end">
            <div class="warn" id="warn"></div>
            <div style="display:flex; gap:8px">
              <button class="btn" id="saveBtn">ì„ì‹œì €ì¥</button>
              <button class="btn primary" id="nextBtn">ë‹¤ìŒ</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card hidden" id="resultCard">
        <div class="result">
          <div class="score-badge" id="scoreBadge">ì ìˆ˜</div>
          <p style="margin:14px 0 0" id="msg"></p>
          <div class="explain" id="explain"></div>
          <div style="margin-top:14px; display:flex; gap:8px; justify-content:center">
            <button class="btn" id="retryBtn">ë‹¤ì‹œ í’€ê¸°</button>
          </div>
        </div>
      </div>
    </main>

    <div class="footer">â€» 8ê°œ ì´ìƒ ì •ë‹µ ì‹œ ì¶•í•˜ í’ì„ ì´ íŒ¡! íŒ¡! ğŸˆ</div>
  </div>

  <!-- í’ì„  ë ˆì´ì–´ -->
  <div class="balloon-layer" id="balloonLayer" aria-hidden="true"></div>

<script>
/** ==========================
 * ë¬¸ì œ ë°ì´í„° (10ë¬¸í•­, ê³ ë“±í•™ìƒ ë‚œì´ë„)
 * ========================== */
const QUESTIONS = [
  {
    q: "ë‹¤ìŒ ì¤‘ â€˜ëŒ€í‘œì  ì˜¨ì‹¤ê°€ìŠ¤â€™ê°€ ì•„ë‹Œ ê²ƒì€?",
    options: ["ì´ì‚°í™”íƒ„ì†Œ(COâ‚‚)", "ë©”íƒ„(CHâ‚„)", "ì•„ì‚°í™”ì§ˆì†Œ(Nâ‚‚O)", "ì‚°ì†Œ(Oâ‚‚)"],
    answer: 3,
    explain: "ì‚°ì†Œ(Oâ‚‚)ëŠ” ì˜¨ì‹¤ê°€ìŠ¤ê°€ ì•„ë‹™ë‹ˆë‹¤. ì´ì‚°í™”íƒ„ì†Œ, ë©”íƒ„, ì•„ì‚°í™”ì§ˆì†Œ ë“±ì€ ëŒ€ê¸° ì¤‘ì—ì„œ ë³µì‚¬ì—´ì„ í¡ìˆ˜Â·ì¬ë°©ì¶œí•˜ì—¬ ì˜¨ì‹¤íš¨ê³¼ë¥¼ ê°•í™”í•©ë‹ˆë‹¤."
  },
  {
    q: "íƒ„ì†Œë°œìêµ­ì„ í‘œì‹œí•  ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë‹¨ìœ„ëŠ”?",
    options: ["kgCOâ‚‚e(ì´ì‚°í™”íƒ„ì†Œí™˜ì‚°í‚¬ë¡œê·¸ë¨)", "ppm", "kWh", "dB"],
    answer: 0,
    explain: "ì œí’ˆÂ·í™œë™ì—ì„œ ë‚˜ì˜¤ëŠ” ë‹¤ì–‘í•œ ì˜¨ì‹¤ê°€ìŠ¤ë¥¼ COâ‚‚ë¡œ í™˜ì‚°í•œ ê°’ì¸ kgCOâ‚‚e ë‹¨ìœ„ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤."
  },
  {
    q: "ë‹¤ìŒ ì¤‘ ì¬ìƒì—ë„ˆì§€ë¡œ ë¶„ë¥˜ë˜ì§€ ì•ŠëŠ” ê²ƒì€?",
    options: ["ì„íƒ„", "íƒœì–‘ê´‘", "í’ë ¥", "ì§€ì—´"],
    answer: 0,
    explain: "ì„íƒ„ì€ í™”ì„ì—°ë£Œë¡œ ì¬ìƒì—ë„ˆì§€ì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. íƒœì–‘ê´‘Â·í’ë ¥Â·ì§€ì—´ì€ ì¬ìƒì—ë„ˆì§€ì…ë‹ˆë‹¤."
  },
  {
    q: "ì—¬í–‰ ì‹œ 1ì¸Â·1km ì´ë™ ê¸°ì¤€ ë°°ì¶œëŸ‰ì´ ê°€ì¥ ì ì€ ëŒ€ì¤‘êµí†µìˆ˜ë‹¨ì€ ì¼ë°˜ì ìœ¼ë¡œ ë¬´ì—‡ì¼ê¹Œìš”?",
    options: ["í•­ê³µê¸°", "ìŠ¹ìš©ì°¨(1ì¸ íƒ‘ìŠ¹)", "ì‹œì™¸ë²„ìŠ¤", "ê³ ì†ì² ë„/ë„ì‹œì² ë„"],
    answer: 3,
    explain: "ì² ë„ëŠ” ì¢Œì„ë‹¹ ì—ë„ˆì§€ íš¨ìœ¨ì´ ë†’ì•„ ë°°ì¶œëŸ‰ì´ ë‚®ìŠµë‹ˆë‹¤. í•­ê³µê¸°Â·ìŠ¹ìš©ì°¨ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ë†’ìŠµë‹ˆë‹¤."
  },
  {
    q: "ìƒìˆ˜ë³‘ì— ì£¼ë¡œ ì“°ì´ëŠ” í”Œë¼ìŠ¤í‹± ìˆ˜ì§€ì½”ë“œ(ì¬í™œìš© ê¸°í˜¸ ìˆ«ì)ëŠ”?",
    options: ["â‘  PET", "â‘¡ HDPE", "â‘¤ PP", "â‘¥ PS"],
    answer: 0,
    explain: "ìƒìˆ˜ë³‘ì€ ë³´í†µ PET(í´ë¦¬ì—í‹¸ë Œ í…Œë ˆí”„íƒˆë ˆì´íŠ¸, ì½”ë“œ 1ë²ˆ)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¼ë²¨ ë¶„ë¦¬Â·ì„¸ì²™ í›„ ë°°ì¶œì´ ì¢‹ì•„ìš”."
  },
  {
    q: "ê°™ì€ ë°ê¸° ê¸°ì¤€ìœ¼ë¡œ ì „ë ¥ì†Œë¹„ê°€ ê°€ì¥ ì ì€ ì¡°ëª…ì€?",
    options: ["ë°±ì—´ë“±", "í• ë¡œê²", "í˜•ê´‘ë“±", "LED"],
    answer: 3,
    explain: "LEDê°€ íš¨ìœ¨ì´ ê°€ì¥ ë†’ìŠµë‹ˆë‹¤. ìˆ˜ëª…ë„ ê¸¸ì–´ ì „ì²´ í™˜ê²½ë¶€ë‹´ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
  },
  {
    q: "ë‹¤ìŒ ì¤‘ ìŒì‹ë¬¼ì“°ë ˆê¸° ê°ëŸ‰ ë°©ë²•ìœ¼ë¡œ â€˜ì˜³ì§€ ì•Šì€â€™ ê²ƒì€?",
    options: ["ì‹ë‹¨ ë¯¸ë¦¬ ê³„íší•˜ê¸°", "ë‚¨ì€ ìŒì‹ ì¬í™œìš© ë ˆì‹œí”¼ í™œìš©", "ëƒ‰ì¥ê³  ì •ë¦¬ë¡œ ìœ í†µê¸°í•œ ê´€ë¦¬", "ì‹±í¬ëŒ€ì—ì„œ ê°ˆì•„ í•˜ìˆ˜êµ¬ë¡œ ë°°ì¶œ"],
    answer: 3,
    explain: "í•˜ìˆ˜êµ¬ ë°°ì¶œì€ ìˆ˜ì§ˆì˜¤ì—¼ê³¼ ì²˜ë¦¬ë¶€ë‹´ì„ í‚¤ì›ë‹ˆë‹¤. ê³„íšÂ·ë³´ê´€Â·ì¬í™œìš© ë ˆì‹œí”¼ê°€ ê°ëŸ‰ì˜ í•µì‹¬ì…ë‹ˆë‹¤."
  },
  {
    q: "ë‹¤ìˆ˜ êµ­ê°€ê°€ ì„ ì–¸í•œ â€˜íƒ„ì†Œì¤‘ë¦½(ë„·ì œë¡œ)â€™ ëª©í‘œ ì—°ë„ë¡œ ê°€ì¥ ë„ë¦¬ ì±„íƒëœ ê²ƒì€?",
    options: ["2030ë…„", "2040ë…„", "2050ë…„", "2100ë…„"],
    answer: 2,
    explain: "ì—¬ëŸ¬ êµ­ê°€Â·ë„ì‹œÂ·ê¸°ì—…ì´ 2050ë…„ íƒ„ì†Œì¤‘ë¦½ì„ ëª©í‘œë¡œ ë¡œë“œë§µì„ ìˆ˜ë¦½í•˜ê³  ìˆìŠµë‹ˆë‹¤."
  },
  {
    q: "íƒ„ì†Œë°°ì¶œê¶Œ ê±°ë˜ì œ(ETS)ì˜ í•µì‹¬ ëª©ì ì€?",
    options: ["ì„¸ìˆ˜ í™•ë³´", "ì‹œì¥ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ê°ì¶• ìœ ë„", "ì—ë„ˆì§€ ê°€ê²© ì¸ìƒ", "ìˆ˜ì¶œ ì´‰ì§„"],
    answer: 1,
    explain: "ì´ëŸ‰ì„ ì •í•˜ê³  ê±°ë˜ë¥¼ í—ˆìš©í•´ ë¹„ìš©íš¨ìœ¨ì ìœ¼ë¡œ ë°°ì¶œì„ ì¤„ì´ëŠ” ê²ƒì´ ëª©ì ì…ë‹ˆë‹¤."
  },
  {
    q: "ì˜¤ì¡´Â·ì´ˆë¯¸ì„¸ë¨¼ì§€(PM2.5) ë“± 2ì°¨ ìƒì„±ì— í° ì˜í–¥ì„ ì£¼ëŠ” ì „êµ¬ë¬¼ì§ˆ ì¡°í•©ì€?",
    options: ["COì™€ ìˆ˜ì¦ê¸°", "NOxì™€ VOCs", "ë©”íƒ„ê³¼ ì§ˆì†Œ", "í—¬ë¥¨ê³¼ ë„¤ì˜¨"],
    answer: 1,
    explain: "ì§ˆì†Œì‚°í™”ë¬¼(NOx)ê³¼ íœ˜ë°œì„±ìœ ê¸°í™”í•©ë¬¼(VOCs)ì´ ê´‘í™”í•™ ë°˜ì‘ì„ ê±°ì³ ì˜¤ì¡´Â·2ì°¨ ìœ ê¸°ì—ì–´ë¡œì¡¸ ë“±ì„ ë§Œë“­ë‹ˆë‹¤."
  }
];

const state = {
  idx: 0,
  answers: Array(QUESTIONS.length).fill(null) // ì‚¬ìš©ìê°€ ê³ ë¥¸ ë³´ê¸° ì¸ë±ìŠ¤ ì €ì¥
};

const els = {
  bar: document.getElementById('bar'),
  qidx: document.getElementById('qidx'),
  qtext: document.getElementById('qtext'),
  qtype: document.getElementById('qtype'),
  choices: document.getElementById('choices'),
  warn: document.getElementById('warn'),
  prevBtn: document.getElementById('prevBtn'),
  nextBtn: document.getElementById('nextBtn'),
  saveBtn: document.getElementById('saveBtn'),
  resultCard: document.getElementById('resultCard'),
  app: document.getElementById('app'),
  scoreBadge: document.getElementById('scoreBadge'),
  msg: document.getElementById('msg'),
  explain: document.getElementById('explain'),
  retryBtn: document.getElementById('retryBtn'),
  balloonLayer: document.getElementById('balloonLayer')
};

// ì´ˆê¸° ë Œë”
render();

els.prevBtn.addEventListener('click', () => {
  if(state.idx>0){ state.idx--; render(); }
});
els.nextBtn.addEventListener('click', onNext);
els.saveBtn.addEventListener('click', saveTemp);
els.retryBtn.addEventListener('click', resetAll);

function render(){
  els.resultCard.classList.add('hidden');
  const total = QUESTIONS.length;
  const q = QUESTIONS[state.idx];
  els.qidx.textContent = `ë¬¸ì œ ${state.idx+1} / ${total}`;
  els.qtype.textContent = 'ê°ê´€ì‹';
  els.qtext.textContent = q.q;

  els.choices.innerHTML = '';
  q.options.forEach((text, i) => {
    const id = `opt-${state.idx}-${i}`;
    const wrap = document.createElement('label');
    wrap.className = 'choice';
    wrap.innerHTML = `
      <input type="radio" name="q-${state.idx}" id="${id}" value="${i}" ${state.answers[state.idx]===i?'checked':''}/>
      <div>${text}</div>
    `;
    wrap.addEventListener('click', ()=> { els.warn.textContent=''; });
    els.choices.appendChild(wrap);
  });

  els.prevBtn.disabled = state.idx===0;
  els.nextBtn.textContent = (state.idx === total-1) ? 'ì œì¶œ' : 'ë‹¤ìŒ';
  const progress = Math.round((state.idx)/total*100);
  els.bar.style.width = `${progress}%`;
}

function onNext(){
  const selected = document.querySelector(`input[name="q-${state.idx}"]:checked`);
  if(!selected){
    els.warn.textContent = 'ë³´ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš”.';
    return;
  }
  els.warn.textContent = '';
  state.answers[state.idx] = Number(selected.value);

  // ë§ˆì§€ë§‰ì´ë©´ ì±„ì 
  if(state.idx === QUESTIONS.length-1){
    grade();
  }else{
    state.idx++;
    render();
  }
}

function grade(){
  const correctCount = QUESTIONS.reduce((acc, q, i)=>{
    return acc + (state.answers[i] === q.answer ? 1 : 0);
  }, 0);

  els.bar.style.width = '100%';
  const total = QUESTIONS.length;
  const percent = Math.round(correctCount/total*100);
  els.scoreBadge.textContent = `ì ìˆ˜: ${correctCount} / ${total} (${percent}%)`;
  els.msg.innerHTML = correctCount >= 8 
    ? `âœ… í›Œë¥­í•´ìš”! í™˜ê²½ ìƒì‹ ë§Œì ì— ê°€ê¹ìŠµë‹ˆë‹¤. (8ê°œ ì´ìƒ ì •ë‹µ)` 
    : `â„¹ï¸ ë” ì¢‹ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”. í•´ì„¤ì„ ì½ê³  ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”.`;

  // í•´ì„¤ í¼ì¹¨
  els.explain.innerHTML = QUESTIONS.map((q, i)=>{
    const user = state.answers[i];
    const ok = user === q.answer;
    const icon = ok ? 'âœ…' : 'âŒ';
    const uTxt = user==null ? 'ë¯¸ì‘ë‹µ' : q.options[user];
    const aTxt = q.options[q.answer];
    return `
      <details ${ok ? '' : 'open'}>
        <summary>${icon} Q${i+1}. ${q.q}</summary>
        <div style="margin-top:8px">
          <div><small>ë‚´ ë‹µ:</small> ${uTxt}</div>
          <div><small>ì •ë‹µ:</small> <b style="color:${ok?'var(--ok)':'var(--accent-2)'}">${aTxt}</b></div>
          <div style="margin-top:6px; color:#c8d6ef">${q.explain}</div>
        </div>
      </details>
    `;
  }).join('');

  document.querySelector('main .card').classList.add('hidden');
  els.resultCard.classList.remove('hidden');

  if(correctCount >= 8){
    celebrateWithBalloons();
  }
}

function saveTemp(){
  try{
    localStorage.setItem('ecoQuizAnswers', JSON.stringify({
      idx: state.idx,
      answers: state.answers
    }));
    toast('ì„ì‹œì €ì¥ ì™„ë£Œ!');
  }catch(e){
    toast('ì €ì¥ ì‹¤íŒ¨: ë¸Œë¼ìš°ì € ì €ì¥ì†Œë¥¼ í™•ì¸í•˜ì„¸ìš”.');
  }
}

function resetAll(){
  state.idx = 0;
  state.answers = Array(QUESTIONS.length).fill(null);
  document.querySelector('main .card').classList.remove('hidden');
  els.resultCard.classList.add('hidden');
  els.warn.textContent = '';
  render();
  scrollTo({top:0, behavior:'smooth'});
}

/* ê°„ë‹¨ í† ìŠ¤íŠ¸ */
function toast(text){
  const t = document.createElement('div');
  t.textContent = text;
  t.style.position='fixed';
  t.style.left='50%';
  t.style.top='18px';
  t.style.transform='translateX(-50%)';
  t.style.padding='10px 14px';
  t.style.border='1px solid rgba(255,255,255,.25)';
  t.style.background='#0f1a31';
  t.style.borderRadius='10px';
  t.style.zIndex='10000';
  document.body.appendChild(t);
  setTimeout(()=> t.remove(), 1500);
}

/** ==========================
 * ğŸˆ í’ì„  ì¶•í•˜ ì• ë‹ˆë©”ì´ì…˜
 * ========================== */
function celebrateWithBalloons(){
  const layer = els.balloonLayer;
  layer.innerHTML = '';
  const colors = ['#ff7aa2','#6be0ff','#ffd166','#c3f584','#b69cff','#ffad66','#7de3b9'];

  const count = 24; // í’ì„  ê°œìˆ˜
  const vw = window.innerWidth;
  const vh = window.innerHeight;

  for(let i=0;i<count;i++){
    const b = document.createElement('div');
    b.className = 'balloon';
    const color = colors[Math.floor(Math.random()*colors.length)];
    b.style.setProperty('--bcol', color);

    const x = Math.random()*vw;
    const delay = Math.random()*0.6;
    const dur = 6 + Math.random()*3;

    b.style.left = `${x}px`;
    b.style.bottom = `-100px`;
    b.style.animationDuration = `${dur}s`;
    b.style.animationDelay = `${delay}s`;

    layer.appendChild(b);
  }

  // 2.5ì´ˆ í›„ íŒ!
  setTimeout(()=>{
    const balloons = [...layer.querySelectorAll('.balloon')];
    balloons.forEach(b=>{
      popBalloon(b);
    });
    // 1.2ì´ˆ í›„ ë ˆì´ì–´ ì •ë¦¬
    setTimeout(()=> layer.innerHTML = '', 1200);
  }, 2500);
}

function popBalloon(b){
  // íŒ ì´í™íŠ¸
  const rect = b.getBoundingClientRect();
  b.classList.add('pop');

  // íŒŒí¸(ë²„ìŠ¤íŠ¸) ìƒì„±
  for(let k=0;k<8;k++){
    const piece = document.createElement('div');
    piece.className = 'burst';
    const ang = Math.random()*Math.PI*2;
    const dist = 30+Math.random()*28;
    const dx = Math.cos(ang)*dist;
    const dy = Math.sin(ang)*dist;
    piece.style.left = (rect.left + rect.width/2) + 'px';
    piece.style.top  = (rect.top + rect.height/2) + 'px';
    piece.style.setProperty('--dx', dx+'px');
    piece.style.setProperty('--dy', dy+'px');
    piece.style.background = b.style.getPropertyValue('--bcol') || '#fff';
    document.body.appendChild(piece);
    setTimeout(()=> piece.remove(), 650);
  }
}

/* ìƒˆë¡œê³ ì¹¨ ë³µêµ¬(ìˆë‹¤ë©´) */
(function restore(){
  try{
    const raw = localStorage.getItem('ecoQuizAnswers');
    if(!raw) return;
    const saved = JSON.parse(raw);
    if(!saved || !Array.isArray(saved.answers)) return;
    state.idx = Math.min(Math.max(0, saved.idx|0), QUESTIONS.length-1);
    state.answers = saved.answers.slice(0, QUESTIONS.length).concat(Array(QUESTIONS.length).fill(null)).slice(0, QUESTIONS.length);
    render();
  }catch(e){}
})();
</script>
</body>
</html>
